(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[213],{432:(e,t,l)=>{"use strict";l.d(t,{D:()=>w,default:()=>N});var s=l(4407),n=l(4127);function r(){for(var e,t,l=0,s="",n=arguments.length;l<n;l++)(e=arguments[l])&&(t=function e(t){var l,s,n="";if("string"==typeof t||"number"==typeof t)n+=t;else if("object"==typeof t)if(Array.isArray(t)){var r=t.length;for(l=0;l<r;l++)t[l]&&(s=e(t[l]))&&(n&&(n+=" "),n+=s)}else for(s in t)t[s]&&(n&&(n+=" "),n+=s);return n}(e))&&(s&&(s+=" "),s+=t);return s}var a=function(e){return e[e.C=0]="C",e[e.C_SHARP=1]="C_SHARP",e[e.D=2]="D",e[e.D_SHARP=3]="D_SHARP",e[e.E=4]="E",e[e.F=5]="F",e[e.F_SHARP=6]="F_SHARP",e[e.G=7]="G",e[e.G_SHARP=8]="G_SHARP",e[e.A=9]="A",e[e.A_SHARP=10]="A_SHARP",e[e.B=11]="B",e}({});let i=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];class c{compare(e){return this.value-e.value}equals(e){return this.value===e.value}getAbsoluteInterval(e){return Math.abs(this.value-e.value)}comparePitchClass(e){return e instanceof c?this.pitchClass==e.pitchClass:this.pitchClass==e}toString(){return this.pitchClassStr+this.octave.toString()}constructor(e,t){this.pitchClass=e,this.octave=t,this.pitchClassStr=i[e],this.value=12*t+e}}class o extends c{constructor(e,t){super(e.pitchClass,e.octave),this.fretNumber=t}}let u=[new c(4,2),new c(9,2),new c(2,3),new c(7,3),new c(11,3),new c(4,4)],d={MAJOR:[2,2,1,2,2,2],MINOR:[2,1,2,2,1,2],MAJOR_TRIAD:[4,3]},h=(0,n.createContext)([null,null,null,null,null,null]),f=(0,n.createContext)(()=>{});var x=function(e){return e[e.CLEAR=0]="CLEAR",e[e.CHANGE_STRING=1]="CHANGE_STRING",e[e.SET=2]="SET",e}({});function p(e,t){switch(t.actionType){case 0:return e.map(e=>null);case 1:return e.map((e,l)=>t.stringId==l?t.newFret:e);case 2:return t.newFrets}}let v=e=>{let{note:t,active:l,action:a}=e,{scaleId:i,setScaleId:c}=(0,n.useContext)(w),o=function(e,t){let l=0;return Array.from(d[t].map((l=0,e=>l+=e)),(t,l)=>(e+t)%12)}(i.tonic,"MAJOR_TRIAD");return(0,s.jsx)("button",{onClick:a,className:r("basis-full grow-0 text-center align-middle transition-colors first:border-b-4 first:border-amber-400",{"bg-gray-700":i.tonic!=t.pitchClass&&o&&o.includes(t.pitchClass),"bg-blue-900":i.tonic===t.pitchClass},{"text-amber-700 font-bold text-xl":l,"text-base first:text-amber-300":!l}),children:t.pitchClassStr})},m=e=>{let{rows:t,firstNote:l,selectedFret:n,action:r}=e;return(0,s.jsx)("div",{className:"basis-full grow-0 h-full flex flex-col place-items-stretch",children:(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;return Array.from({length:t},(t,l)=>{var s;return new c((s=e.value+l)%12,Math.floor(s/12))})})(l,t).map((e,t)=>{var l;return(0,s.jsx)(v,{note:e,action:()=>(null==n?void 0:n.equals(e))?r(null):r(new o(e,t)),active:null!=(l=null==n?void 0:n.comparePitchClass(e))&&l},t)})})};function C(e){let{rows:t,tuning:l,selectedFrets:r}=e,a=(0,n.useContext)(f);return(0,s.jsx)("div",{className:"h-full grow place-items-center flex flex-row p-4",children:l.map((e,l)=>(0,s.jsx)(m,{rows:t,firstNote:e,selectedFret:r[l],action:e=>a({actionType:x.CHANGE_STRING,stringId:l,newFret:e})},l))})}let b=e=>{let{note:t,id:l}=e,{scaleId:a,setScaleId:c}=(0,n.useContext)(w);return(0,s.jsx)("button",{onClick:async()=>{c({tonic:t})},className:r("flex-1 text-center content-center size-fit self-center aspect-square rounded-full text-xl select-none cursor-pointer",{"bg-blue-500":a.tonic===t,"bg-gray-400":a.tonic!==t}),children:i[t]})};function g(){return(0,s.jsx)("div",{className:"flex flex-row gap-2 size-full place-items-stretch",children:i.map((e,t)=>(0,s.jsx)(b,{note:t,id:t},e))})}function A(){let e=(0,n.useContext)(h);return(0,s.jsxs)("div",{className:"grow grid grid-cols-5 grid-rows-6 gap-4 p-4 outline h-full",children:[(0,s.jsx)("div",{className:"col-span-5 col-start-1 row-span-2 outline outline-amber-100",children:(0,s.jsx)(g,{})}),(0,s.jsx)("div",{className:"col-span-3 col-start-2 row-span-3 row-start-3 outline outline-amber-700",children:(0,s.jsx)(g,{})}),(0,s.jsx)("div",{className:"col-span-3 col-start-2 row-span-1 row-start-6 outline outline-cyan-500 content-end",children:(0,s.jsx)("h2",{className:"text-center",children:e.map((e,t)=>null==e?"x":e.fretNumber).join(" ")})})]})}let w=(0,n.createContext)({scaleId:{tonic:a.C},setScaleId:()=>{}});function N(){let[e,t]=(0,n.useState)({tonic:a.C}),[l,r]=(0,n.useReducer)(p,[null,null,null,null,null,null]);return(0,s.jsx)(h,{value:l,children:(0,s.jsx)(f,{value:r,children:(0,s.jsx)(w.Provider,{value:{scaleId:e,setScaleId:t},children:(0,s.jsxs)("div",{className:"grow m-2 gap-6 flex",children:[(0,s.jsx)("div",{style:{position:"relative",display:"block"},className:"flex-2/3 grow-0 outline outline-green-600",children:(0,s.jsx)(A,{})}),(0,s.jsx)("div",{className:"flex-1/3 outline outline-blue-500",children:(0,s.jsx)(C,{rows:12,tuning:u,selectedFrets:l})})]})})})})}},2692:(e,t,l)=>{Promise.resolve().then(l.bind(l,432))}},e=>{var t=t=>e(e.s=t);e.O(0,[311,668,358],()=>t(2692)),_N_E=e.O()}]);